(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/scan/index"],{"460d":function(e,t,n){"use strict";var a;n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var c=function(){var e=this,t=e.$createElement;e._self._c},i=[]},"539b":function(e,t,n){"use strict";n.r(t);var a=n("aaa2"),c=n.n(a);for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);t["default"]=c.a},"542f":function(e,t,n){"use strict";(function(e){n("1c65");a(n("66fd"));var t=a(n("59b4"));function a(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])},"59b4":function(e,t,n){"use strict";n.r(t);var a=n("460d"),c=n("539b");for(var i in c)"default"!==i&&function(e){n.d(t,e,(function(){return c[e]}))}(i);n("96c8");var o,s=n("f0c5"),u=Object(s["a"])(c["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],o);t["default"]=u.exports},"6f93":function(e,t,n){},"96c8":function(e,t,n){"use strict";var a=n("6f93"),c=n.n(a);c.a},aaa2:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{scanURL:"",nickName:"",code:"",data:{}}},onTabItemTap:function(){e.showLoading({title:"正在处理..."}),this.nickName=e.getStorageSync("nickName"),this.scan(),e.hideLoading()},methods:{scan:function(){var t=this;this.nickName=e.getStorageSync("nickName"),e.scanCode({success:function(n){if(t.scanURL=n.result,console.log(n.result.substring(8,17)),"开始"==n.result)e.request({url:"https://wxapi.weiqh.net/api/wx/start?nickName="+t.nickName,method:"GET",success:function(n){console.log(n),t.code=n.data.code,1==t.code||"1"==t.code?(e.switchTab({url:"/pages/index/index"}),e.showModal({content:"欢迎上课！",confirmText:"确定"})):(e.switchTab({url:"/pages/index/index"}),e.showModal({content:"重复扫码，请扫其他二维码",confirmText:"确定"}))}});else if("结束"==n.result)e.redirectTo({url:"/pages/finish/index"});else if("weiqh.net"==n.result.substring(8,17)){var a=n.result.split("/")[4].split(".")[0];e.request({url:"https://wxapi.weiqh.net/api/wx/addBu?nickName="+t.nickName+"&number="+a,method:"GET",success:function(n){console.log("扫码"),console.log(n.data),t.code=n.data.code,0==t.code||"0"==t.code?(e.switchTab({url:"/pages/index/index"}),e.showModal({content:"重复扫码，请选择其他课程",confirmText:"确定"})):4==t.code||"4"==t.code?(e.switchTab({url:"/pages/index/index"}),e.showModal({content:"请扫开始码以开始",confirmText:"确定"})):t.toPage(a)}})}else e.switchTab({url:"/pages/index/index"}),e.showModal({content:"请扫描正确二维码",confirmText:"确定"})},fail:function(t){e.switchTab({url:"/pages/index/index"}),e.showModal({content:"请扫描正确二维码",confirmText:"确定"})},complete:function(){}})},toPage:function(t){this.data.data=this.scanURL,this.data.type=t;var n=encodeURIComponent(JSON.stringify(this.data));e.redirectTo({url:"/pages/scan/result/index?data="+n})}}};t.default=n}).call(this,n("543d")["default"])}},[["542f","common/runtime","common/vendor"]]]);